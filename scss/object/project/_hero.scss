/******************************
トップページ　ヒーロー
******************************/
@use "../../foundation/forwards" as *;
@use "sass:math";

/* 背景（白フラ防止） */
.p-hero { background: #000; }

.p-hero {
  width: 100%;
  height: 667px;           /* SP: 高さ固定 */
  overflow: hidden;

  .swiper,
  .swiper-wrapper,
  .swiper-slide,
  .slide-media { height: 100%; }

  .swiper-slide { background: #000; }

  .slide-media {
    position: relative;
    overflow: hidden;
    margin: 0;
  }

  /* ▼ ベース状態：translate だけ（scale 1） */
  .p-hero__img {
    position: absolute;
    top: 0;
    left: 50%;
    height: 100%;
    width: auto;
    max-width: none;
    display: block;

    /* 各スライドやimgに style="--hero-x:65%" を指定して左右を決める */
    transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1);
    transform-origin: center center;
    will-change: transform; /* ヒント */
  }
}

/* PC/タブレットは幅基準（translate なし、scale のみ） */
@include mq("tab") {
  .p-hero {
    height: auto;
    aspect-ratio: 1440 / 823;

    .p-hero__img {
      position: static;
      width: 100%;
      height: auto;
      transform: scale(1);
    }
  }
}

/* ▼ ズームのキーフレーム：transform を直接補間 */
@keyframes heroZoom {
  from { transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1); }
  to   { transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1.05); }
}

@keyframes heroZoomPc {
  from { transform: scale(1); }
  to   { transform: scale(1.05); }
}

/* ▼ アクティブ画像にだけ .is-zoom をJSで付ける */
.p-hero__img.is-zoom {
  animation: heroZoom 6s ease forwards;
}
@include mq("tab") {
  .p-hero__img.is-zoom {
    animation: heroZoomPc 6s ease forwards;
  }
}

/* 初期白対策（任意） */
.p-hero:not(.is-inited) .swiper .swiper-slide:first-child { opacity: 1 !important; }

/* 動きを減らす */
@media (prefers-reduced-motion: reduce) {
  .p-hero__img.is-zoom { animation: none !important; }
}