/******************************
トップページ　ヒーロー
******************************/
@use "../../foundation/forwards" as *;
@use "sass:math";

//-------------------------------------
// Hero (Swiper + CSS Fade + Ken Burns)
//-------------------------------------

.p-hero {
  width: 100%;
  height: rem(667);   // SP: 高さ固定
  overflow: hidden;

  .swiper,
  .swiper-wrapper,
  .swiper-slide,
  .slide-media {
    height: 100%;
  }

  /* （任意）黒バックでフェード間の地色を統一 */
  .swiper-slide { background: #000; }

  .slide-media {
    position: relative;
    overflow: hidden;   /* ズーム時のはみ出しを隠す */
    margin: 0;
  }

  /* 画像（SPは左右トリミング／PCは幅基準） */
  .p-hero__img {
    position: absolute;
    top: 0;
    left: 50%;
    height: 100%;
    width: auto;
    max-width: none;
    display: block;

    /* 各スライド/画像で style="--hero-x:65%" 可 */
    transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1);
    transform-origin: center center;
    will-change: transform; /* パフォーマンスヒント */
  }
}

/* PC / タブレット */
@include mq("tab") {
  .p-hero {
    height: auto;
    aspect-ratio: 1440 / 823;   /* お好みで */

    .p-hero__img {
      position: static;
      width: 100%;
      height: auto;
      transform: scale(1);
    }
  }
}

/* Ken Burns（ズームは transform を直接補間） */
@keyframes heroZoomSp {
  from { transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1); }
  to   { transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1.05); }
}
@keyframes heroZoomPc {
  from { transform: scale(1); }
  to   { transform: scale(1.05); }
}

/* アクティブ画像にだけJSで .is-zoom を付ける */
.p-hero__img.is-zoom {
  animation: heroZoomSp 7s ease forwards;
}
@include mq("tab") {
  .p-hero__img.is-zoom {
    animation: heroZoomPc 7s ease forwards;
  }
}

/* 初期白対策：初期化前は1枚目だけ見せる */
.p-hero:not(.is-inited) .swiper .swiper-slide:first-child {
  opacity: 1 !important;
}

/* “ふわっ”の質感をもう少し柔らかく（fadeのeasingを助ける） */
.p-hero .swiper .swiper-slide {
  transition-property: opacity !important;
  transition-duration: 2s !important; /* JSのspeedとだいたい合わせる */
  transition-timing-function: cubic-bezier(.25,.1,.3,1) !important; /* やわらかい */
}

/* 動きを減らす */
@media (prefers-reduced-motion: reduce) {
  .p-hero__img.is-zoom { animation: none !important; }
  .p-hero .swiper .swiper-slide { transition: none !important; }
}

//-------------------------------------
//Hero内部コンテンツ
//-------------------------------------
.p-hero {
  --inner-max: 1560px; /* 念のためここでも定義可 */
  --hero-inner: 12px; /*SPのheroの左padding*/
  /* 画面幅が --inner-max を超えたら (100vw - max幅) / 2、
     それ以下なら --hero-inner を使う */
  --edge: max(var(--hero-inner), calc((100vw - var(--inner-max)) / 2));
  position: relative;

  &__catchcopy{
    position: absolute;
    bottom: rem(137);
    left: rem(12);
    z-index: 10;
    @include mq(tab) {
      bottom: 37.3%;
      left: calc(var(--edge) + rem(66) - var(--hero-inner));
    }
  }

  &__text{
    position: absolute;
    bottom: rem(89) + rem(30);
    left: 0;
    z-index: 10;
    @include mq(tab) {
      bottom: 29%;
    }
    @include mq(pc) {
      bottom: 27%;
    }
  }

  &__news{
    position: absolute;
    left: rem(12);
    bottom: rem(10);
    z-index: 10;
    @include mq(tab) {
      left: rem(24);
      bottom: 2%;
    }
    @include mq(pc) {
      left: calc(var(--edge) + rem(71) - var(--hero-inner));
      bottom: 4.5%;
    }
  }
}