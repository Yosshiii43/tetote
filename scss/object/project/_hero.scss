/******************************
トップページ　ヒーロー
******************************/
@use "../../foundation/forwards" as *;
@use "sass:math";

/************************************
 * Hero (Swiper + CSS Fade + Ken Burns)
 ************************************/

.p-hero {
  width: 100%;
  height: 667px;   // SP: 高さ固定
  overflow: hidden;

  .swiper,
  .swiper-wrapper,
  .swiper-slide,
  .slide-media {
    height: 100%;
  }

  /* （任意）黒バックでフェード間の地色を統一 */
  .swiper-slide { background: #000; }

  .slide-media {
    position: relative;
    overflow: hidden;   /* ズーム時のはみ出しを隠す */
    margin: 0;
  }

  /* 画像（SPは左右トリミング／PCは幅基準） */
  .p-hero__img {
    position: absolute;
    top: 0;
    left: 50%;
    height: 100%;
    width: auto;
    max-width: none;
    display: block;

    /* 各スライド/画像で style="--hero-x:65%" 可 */
    transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1);
    transform-origin: center center;
    will-change: transform; /* パフォーマンスヒント */
  }
}

/* PC / タブレット */
@include mq("tab") {
  .p-hero {
    height: auto;
    aspect-ratio: 1440 / 823;   /* お好みで */

    .p-hero__img {
      position: static;
      width: 100%;
      height: auto;
      transform: scale(1);
    }
  }
}

/* Ken Burns（ズームは transform を直接補間） */
@keyframes heroZoomSp {
  from { transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1); }
  to   { transform: translateX(calc(-1 * var(--hero-x, 50%))) scale(1.05); }
}
@keyframes heroZoomPc {
  from { transform: scale(1); }
  to   { transform: scale(1.05); }
}

/* アクティブ画像にだけJSで .is-zoom を付ける */
.p-hero__img.is-zoom {
  animation: heroZoomSp 6s ease forwards;
}
@include mq("tab") {
  .p-hero__img.is-zoom {
    animation: heroZoomPc 6s ease forwards;
  }
}

/* 初期白対策：初期化前は1枚目だけ見せる */
.p-hero:not(.is-inited) .swiper .swiper-slide:first-child {
  opacity: 1 !important;
}

/* “ふわっ”の質感をもう少し柔らかく（fadeのeasingを助ける） */
.p-hero .swiper .swiper-slide {
  transition-property: opacity !important;
  transition-duration: 1.1s !important; /* JSのspeedとだいたい合わせる */
  transition-timing-function: cubic-bezier(.25,.1,.3,1) !important; /* やわらかい */
}

/* 動きを減らす */
@media (prefers-reduced-motion: reduce) {
  .p-hero__img.is-zoom { animation: none !important; }
  .p-hero .swiper .swiper-slide { transition: none !important; }
}